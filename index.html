<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Portfolio Carrousels</title>
  <style>
    body {
      background-color: #062242;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      color: #fff;
      text-align: center;
    }

    h2 {
      margin: 40px 0 20px;
      font-size: 2rem;
      border: 2px solid #3a7bd5;
      display: inline-block;
      padding: 10px 20px;
      border-radius: 20px;
    }

    .carousel {
      position: relative;
      width: 100%;
      height: 300px;
      margin: 40px auto;
      perspective: 1000px;
    }

    .slides {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 1s;
    }

    .slides img, .slides iframe {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-height: 200px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      transition: transform 0.5s, opacity 0.5s;
      cursor: pointer;
    }

    /* Carrousel vidéos : ratio 16:9 et centré */
    #slider-videos .slides {
      height: 0;
      padding-bottom: 56.25%; /* ratio 16:9 */
      position: relative;
    }

    #slider-videos .slides iframe {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      height: 100%;
      max-width: 560px;
      border-radius: 12px;
    }

    .nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 2rem;
      color: #3a7bd5;
      cursor: pointer;
      z-index: 10;
      user-select: none;
    }

    .nav.prev { left: 10px; }
    .nav.next { right: 10px; }

    /* Lightbox */
    .lightbox {
      display: none;
      position: fixed;
      z-index: 1000;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      justify-content: center;
      align-items: center;
    }

    .lightbox img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 10px;
    }

    .lightbox:target {
      display: flex;
    }
  </style>
</head>
<body>

  <h2>Vidéos</h2>
  <div class="carousel" id="slider-videos">
    <div class="nav prev" onclick="prevSlide('videos')">&#10094;</div>
    <div class="slides">
      <iframe src="https://www.youtube.com/embed/VIDEO_ID1" frameborder="0" allowfullscreen></iframe>
      <iframe src="https://www.youtube.com/embed/VIDEO_ID2" frameborder="0" allowfullscreen></iframe>
    </div>
    <div class="nav next" onclick="nextSlide('videos')">&#10095;</div>
  </div>

  <h2>Logos</h2>
  <div class="carousel" id="slider-logos">
    <div class="nav prev" onclick="prevSlide('logos')">&#10094;</div>
    <div class="slides"></div>
    <div class="nav next" onclick="nextSlide('logos')">&#10095;</div>
  </div>

  <h2>Affiches</h2>
  <div class="carousel" id="slider-affiches">
    <div class="nav prev" onclick="prevSlide('affiches')">&#10094;</div>
    <div class="slides"></div>
    <div class="nav next" onclick="nextSlide('affiches')">&#10095;</div>
  </div>

  <h2>Affiches (série 2)</h2>
  <div class="carousel" id="slider-affiches2">
    <div class="nav prev" onclick="prevSlide('affiches2')">&#10094;</div>
    <div class="slides"></div>
    <div class="nav next" onclick="nextSlide('affiches2')">&#10095;</div>
  </div>

  <h2>Flyers</h2>
  <div class="carousel" id="slider-flyers">
    <div class="nav prev" onclick="prevSlide('flyers')">&#10094;</div>
    <div class="slides"></div>
    <div class="nav next" onclick="nextSlide('flyers')">&#10095;</div>
  </div>

  <h2>Autres documents</h2>
  <div class="carousel" id="slider-autres">
    <div class="nav prev" onclick="prevSlide('autres')">&#10094;</div>
    <div class="slides"></div>
    <div class="nav next" onclick="nextSlide('autres')">&#10095;</div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <img src="" alt="Agrandissement">
  </div>

  <script>
    const data = {
      logos: 17,
      affiches: 16,
      affiches2: 26,
      flyers: 23,
      autres: 8
    };

    // Remplissage des carrousels images
    Object.keys(data).forEach(cat=>{
      const count = data[cat];
      const slidesDiv = document.querySelector(`#slider-${cat} .slides`);
      for(let i=1;i<=count;i++){
        const img = document.createElement("img");
        if(cat==='flyers'){
          img.src=`images/flyers/flyers${i}.jpg`;
        } else if(cat==='autres'){
          img.src=`images/mockups/mockup${i}.jpg`;
        } else {
          img.src=`images/${cat}/${cat.slice(0,-1)}${i}.jpg`;
        }
        img.alt = cat + i;
        img.onclick = ()=>openLightbox(img.src);
        slidesDiv.appendChild(img);
      }
    });

    const indices = { logos:0, affiches:0, affiches2:0, flyers:0, autres:0, videos:0 };

    function updateCarousel(cat){
      const slides = document.querySelectorAll(`#slider-${cat} .slides > *`);
      slides.forEach((el,i)=>{
        const diff = i - indices[cat];
        const absDiff = Math.abs(diff);

        if(cat!=='videos'){
          const offsetX = diff*220;
          const translateZ = -Math.abs(diff)*150;
          const scale = (i===indices[cat])?1:0.8;
          const rotateY = diff*30;
          el.style.transform = `translateX(${offsetX}px) translate(-50%, -50%) translateZ(${translateZ}px) scale(${scale}) rotateY(${rotateY}deg)`;
          el.style.filter = absDiff>=2?'blur(3px)':'none';
        } else {
          el.style.transform = ''; // pas de 3D sur vidéos
        }
      });
    }

    function prevSlide(cat){
      const max = document.querySelectorAll(`#slider-${cat} .slides > *`).length;
      indices[cat] = (indices[cat]-1+max)%max;
      updateCarousel(cat);
    }

    function nextSlide(cat){
      const max = document.querySelectorAll(`#slider-${cat} .slides > *`).length;
      indices[cat] = (indices[cat]+1)%max;
      updateCarousel(cat);
    }

    function openLightbox(src){
      document.querySelector("#lightbox img").src = src;
      document.querySelector("#lightbox").style.display = "flex";
    }

    function closeLightbox(){
      document.querySelector("#lightbox").style.display = "none";
    }

    // Initialisation
    Object.keys(indices).forEach(updateCarousel);
  </script>
</body>
</html>
